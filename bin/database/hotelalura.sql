-- MySQL Script generated by MySQL Workbench
-- Wed Sep 27 11:13:48 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema hotelalura
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema hotelalura
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `hotelalura` DEFAULT CHARACTER SET utf8 ;
USE `hotelalura` ;

-- -----------------------------------------------------
-- Table `hotelalura`.`pais`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hotelalura`.`pais` (
  `id_pais` INT NOT NULL AUTO_INCREMENT,
  `nombre_pais` VARCHAR(45) NOT NULL,
  `codigo_pais` VARCHAR(3) NULL,
  `codigo_telefonico` VARCHAR(5) NULL,
  PRIMARY KEY (`id_pais`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hotelalura`.`huespedes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hotelalura`.`huespedes` (
  `id_huesped` INT NOT NULL AUTO_INCREMENT,
  `nombre_huesped` VARCHAR(50) NOT NULL,
  `apellido_huesped` VARCHAR(100) NOT NULL,
  `fechaNacimiento_huesped` DATE NOT NULL,
  `nacionalidad_id` INT NULL,
  `email_huesped` VARCHAR(100) NULL,
  `telefono_huesped` VARCHAR(13) NULL,
  PRIMARY KEY (`id_huesped`),
  INDEX `fk_huespedes_pais1_idx` (`nacionalidad_id` ASC) VISIBLE,
  CONSTRAINT `fk_huespedes_nacionalidad`
    FOREIGN KEY (`nacionalidad_id`)
    REFERENCES `hotelalura`.`pais` (`id_pais`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hotelalura`.`formas_pago`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hotelalura`.`formas_pago` (
  `id_formas_pago` INT NOT NULL AUTO_INCREMENT,
  `dsc_forma_pago` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_formas_pago`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hotelalura`.`tipos_habitaciones`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hotelalura`.`tipos_habitaciones` (
  `id_tipo_habitacion` INT NOT NULL AUTO_INCREMENT,
  `nombre_tipo_habitacion` VARCHAR(45) NOT NULL,
  `dsc_tipo_habitacion` VARCHAR(200) NULL,
  `precio_habitacion` DOUBLE NOT NULL,
  PRIMARY KEY (`id_tipo_habitacion`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hotelalura`.`reservas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hotelalura`.`reservas` (
  `id_reservas` INT NOT NULL AUTO_INCREMENT,
  `huesped_id` INT NOT NULL,
  `habitacion_id` INT NOT NULL,
  `fecha_entrada` DATE NOT NULL,
  `fecha_salida` DATE NOT NULL,
  `precio_reserva` VARCHAR(45) NOT NULL,
  `forma_pago_id` INT NULL,
  `numero_reservacion` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_reservas`),
  INDEX `fk_reservas_huesped_idx` (`huesped_id` ASC) INVISIBLE,
  INDEX `fk_reservas_habitacion_idx` (`habitacion_id` ASC) INVISIBLE,
  INDEX `fk_reservas_formaPago_idx` (`forma_pago_id` ASC) VISIBLE,
  CONSTRAINT `fk_reservas_formas_pago`
    FOREIGN KEY (`forma_pago_id`)
    REFERENCES `hotelalura`.`formas_pago` (`id_formas_pago`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_reservas_huesped`
    FOREIGN KEY (`huesped_id`)
    REFERENCES `hotelalura`.`huespedes` (`id_huesped`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_reservas_habitacion`
    FOREIGN KEY (`habitacion_id`)
    REFERENCES `hotelalura`.`tipos_habitaciones` (`id_tipo_habitacion`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hotelalura`.`usuarios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hotelalura`.`usuarios` (
  `idusuarios` INT NOT NULL AUTO_INCREMENT,
  `nombre_usuario` VARCHAR(45) NOT NULL,
  `apellidos_usuario` VARCHAR(45) NULL,
  `fecha_nacimiento_user` DATE NULL,
  `email_usuario` VARCHAR(100) NULL,
  `username` VARCHAR(45) NOT NULL,
  `password_usuario` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`idusuarios`))
ENGINE = InnoDB;

USE `hotelalura` ;

-- -----------------------------------------------------
-- Placeholder table for view `hotelalura`.`vista_nombreCompleto_huesped`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hotelalura`.`vista_nombreCompleto_huesped` (`id_huesped` INT, `nombre_completo` INT);

-- -----------------------------------------------------
-- View `hotelalura`.`vista_nombreCompleto_huesped`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hotelalura`.`vista_nombreCompleto_huesped`;
USE `hotelalura`;
CREATE 
     OR REPLACE ALGORITHM = UNDEFINED 
    DEFINER = `Alura`@`%` 
    SQL SECURITY DEFINER
VIEW `hotelalura`.`vista_nombreCompleto_huesped` AS
    SELECT 
        `hotelalura`.`huespedes`.`id_huesped` AS `id_huesped`,
        CONCAT(`hotelalura`.`huespedes`.`nombre_huesped`,
                ' ',
                `hotelalura`.`huespedes`.`apellido_huesped`) AS `nombre_completo`
    FROM
        `hotelalura`.`huespedes`;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `hotelalura`.`pais`
-- -----------------------------------------------------
START TRANSACTION;
USE `hotelalura`;
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (1, 'Argentina', 'ARG', '+54');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (2, 'Australia', 'AUS', '+61');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (3, 'Brasil', 'BRA', '+55');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (4, 'Canadá', 'CAN', '+1');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (5, 'China', 'CHN', '+86');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (6, 'Francia', 'FRA', '+33');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (7, 'Alemania', 'DEU', '+49');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (8, 'India', 'IND', '+91');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (9, 'Indonesia', 'IDN', '+62');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (10, 'Italia', 'ITA', '+39');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (11, 'Japón', 'JPN', '+81');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (12, 'México', 'MEX', '+52');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (13, 'Rusia', 'RUS', '+7');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (14, 'Arabia Saudita', 'SAU', '+966');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (15, 'Sudáfrica', 'ZAF', '+27');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (16, 'Corea del Sur', 'KOR', '+82');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (17, 'Turquía', 'TUR', '+90');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (18, 'Reino Unido', 'GBR', '+44');
INSERT INTO `hotelalura`.`pais` (`id_pais`, `nombre_pais`, `codigo_pais`, `codigo_telefonico`) VALUES (19, 'Estados Unidos', 'USA', '+1');

COMMIT;


-- -----------------------------------------------------
-- Data for table `hotelalura`.`formas_pago`
-- -----------------------------------------------------
START TRANSACTION;
USE `hotelalura`;
INSERT INTO `hotelalura`.`formas_pago` (`id_formas_pago`, `dsc_forma_pago`) VALUES (1, 'Cheque');
INSERT INTO `hotelalura`.`formas_pago` (`id_formas_pago`, `dsc_forma_pago`) VALUES (2, 'Efectivo');
INSERT INTO `hotelalura`.`formas_pago` (`id_formas_pago`, `dsc_forma_pago`) VALUES (3, 'Moneda extranjera');
INSERT INTO `hotelalura`.`formas_pago` (`id_formas_pago`, `dsc_forma_pago`) VALUES (4, 'Pago móvil');
INSERT INTO `hotelalura`.`formas_pago` (`id_formas_pago`, `dsc_forma_pago`) VALUES (5, 'Tarjeta de crédito');
INSERT INTO `hotelalura`.`formas_pago` (`id_formas_pago`, `dsc_forma_pago`) VALUES (6, 'Tarjeta de débito');
INSERT INTO `hotelalura`.`formas_pago` (`id_formas_pago`, `dsc_forma_pago`) VALUES (7, 'Transferencia bancaria');

COMMIT;


-- -----------------------------------------------------
-- Data for table `hotelalura`.`tipos_habitaciones`
-- -----------------------------------------------------
START TRANSACTION;
USE `hotelalura`;
INSERT INTO `hotelalura`.`tipos_habitaciones` (`id_tipo_habitacion`, `nombre_tipo_habitacion`, `dsc_tipo_habitacion`, `precio_habitacion`) VALUES (1, 'Habitación Doble', 'Habitación para dos personas con cama doble o camas separadas.', 500);
INSERT INTO `hotelalura`.`tipos_habitaciones` (`id_tipo_habitacion`, `nombre_tipo_habitacion`, `dsc_tipo_habitacion`, `precio_habitacion`) VALUES (2, 'Habitación Individual', 'Habitación para una persona con cama individual.', 700);
INSERT INTO `hotelalura`.`tipos_habitaciones` (`id_tipo_habitacion`, `nombre_tipo_habitacion`, `dsc_tipo_habitacion`, `precio_habitacion`) VALUES (3, 'Habitación Familiar', 'Habitación espaciosa para familias con camas adicionales.', 1000);
INSERT INTO `hotelalura`.`tipos_habitaciones` (`id_tipo_habitacion`, `nombre_tipo_habitacion`, `dsc_tipo_habitacion`, `precio_habitacion`) VALUES (4, 'Suite Junior', 'Habitación de lujo con sala de estar y dormitorio separados.', 2000);
INSERT INTO `hotelalura`.`tipos_habitaciones` (`id_tipo_habitacion`, `nombre_tipo_habitacion`, `dsc_tipo_habitacion`, `precio_habitacion`) VALUES (5, 'Suite Presidencial', 'La mejor habitación del hotel, con comodidades de lujo y espacio amplio.', 3000);

COMMIT;


-- -----------------------------------------------------
-- Data for table `hotelalura`.`usuarios`
-- -----------------------------------------------------
START TRANSACTION;
USE `hotelalura`;
INSERT INTO `hotelalura`.`usuarios` (`idusuarios`, `nombre_usuario`, `apellidos_usuario`, `fecha_nacimiento_user`, `email_usuario`, `username`, `password_usuario`) VALUES (1, 'Admin', 'Admin', '2000-01-01', 'admin@gmail.com', 'admin', '$2a$10$TwFrZJU4gAaemBQxTIJIO.babm1rX5GkpQO38WNAQ7B7TRRXVMvFG');

COMMIT;

